(function(){console.log("🟢 Qalam Feedback Page Script Loaded");async function n(){if(!(await chrome.storage.local.get(["autoFillEnabled"])).autoFillEnabled){console.log("⏸️ Auto-fill is disabled. Skipping survey detection.");return}const u="https://qalam.nust.edu.pk",t=Array.from(document.querySelectorAll("ul.classCards")).filter(e=>{const l=Array.from(e.querySelectorAll("li .md-list-content .md-list-heading")).find(a=>a.nextElementSibling&&a.nextElementSibling.textContent.trim().toLowerCase()==="status"),o=l?l.textContent.trim().toLowerCase():"";console.log(`🔎 Extracted status: "${o}"`);const r=o==="not submitted"||o==="";return console.log(`👉 include: ${r}, status: "${o}"`),r}).map(e=>{const s=e.querySelector("a[href*='/survey/']");return s?u+s.getAttribute("href"):null}).filter(e=>e);console.log("📝 Found",t.length,"uncompleted surveys to attempt."),t.length>0?(await chrome.storage.local.set({survey_queue:t}),window.location.href=t[0]):(console.log("✅ No uncompleted surveys found."),await chrome.storage.local.remove("survey_queue"))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(n,1e3)}):setTimeout(n,1e3)})();
